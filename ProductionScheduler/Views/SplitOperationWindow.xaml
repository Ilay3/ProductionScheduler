<Window x:Class="ProductionScheduler.Views.SplitOperationWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Разделение операции" Height="400" Width="600" 
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize">
    <Grid Margin="15">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0" Text="Разделение операции на несколько частей" 
                   FontSize="16" FontWeight="Bold" Margin="0,0,0,15"/>

        <!-- Настройки разделения -->
        <Border Grid.Row="1" BorderBrush="LightGray" BorderThickness="1" Padding="10" Margin="0,0,0,15">
            <StackPanel>
                <Grid>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0" Margin="0,0,10,0">
                        <TextBlock Text="Общее количество:" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding TotalQuantity}" IsReadOnly="True" Background="LightGray"/>
                    </StackPanel>

                    <StackPanel Grid.Column="1">
                        <TextBlock Text="Количество частей:" Margin="0,0,0,5"/>
                        <TextBox Text="{Binding NumberOfParts, UpdateSourceTrigger=PropertyChanged}"/>
                    </StackPanel>
                </Grid>

                <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
                    <Button Content="+" Command="{Binding AddPartCommand}" Width="30" Margin="0,0,5,0"/>
                    <TextBlock Text="Добавить/убрать части" VerticalAlignment="Center"/>
                </StackPanel>
            </StackPanel>
        </Border>

        <!-- Список частей -->
        <DataGrid Grid.Row="2" ItemsSource="{Binding SplitParts}" AutoGenerateColumns="False" CanUserAddRows="False">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Часть" Binding="{Binding PartNumber}" Width="60" IsReadOnly="True"/>
                <DataGridTextColumn Header="Количество" Binding="{Binding Quantity}" Width="100"/>
                <DataGridTemplateColumn Header="Станок" Width="*">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding AvailableMachines}"
                                      SelectedItem="{Binding SelectedMachine, UpdateSourceTrigger=PropertyChanged}"
                                      DisplayMemberPath="Name"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="" Width="60">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <Button Content="-" Command="{Binding RelativeSource={RelativeSource AncestorType=Window}, Path=DataContext.RemovePartCommand}"
                                    CommandParameter="{Binding}" Width="30"/>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>

        <!-- Кнопки -->
        <StackPanel Grid.Row="3" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,15,0,0">
            <Button Content="Разделить" Command="{Binding SplitCommand}" Width="80" Margin="0,0,10,0"/>
            <Button Content="Отмена" Command="{Binding CancelCommand}" Width="80"/>
        </StackPanel>
    </Grid>
</Window>