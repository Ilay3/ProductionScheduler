<Window x:Class="ProductionScheduler.Views.ReportsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewmodels="clr-namespace:ProductionScheduler.ViewModels"
        Title="Отчеты" Height="600" Width="1000" WindowStartupLocation="CenterOwner">
    <Window.DataContext>
        <viewmodels:ReportsViewModel/>
    </Window.DataContext>
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- Фильтры -->
        <StackPanel Grid.Row="0" Orientation="Horizontal" Margin="0,0,0,10">
            <TextBlock Text="Период с:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <DatePicker SelectedDate="{Binding StartDate}" Margin="0,0,10,0"/>
            <TextBlock Text="по:" VerticalAlignment="Center" Margin="0,0,5,0"/>
            <DatePicker SelectedDate="{Binding EndDate}" Margin="0,0,10,0"/>
            <Button Content="Обновить" Command="{Binding RefreshCommand}" Width="80"/>
        </StackPanel>

        <!-- Сводка -->
        <Border Grid.Row="1" Background="LightBlue" Padding="10" Margin="0,0,0,10">
            <TextBlock Text="{Binding Summary}" FontWeight="Bold" FontSize="14"/>
        </Border>

        <!-- Отчеты -->
        <TabControl Grid.Row="2">
            <TabItem Header="Задания">
                <DataGrid ItemsSource="{Binding TaskReports}" AutoGenerateColumns="False" IsReadOnly="True">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="ID" Binding="{Binding TaskId}" Width="50"/>
                        <DataGridTextColumn Header="Деталь" Binding="{Binding DetailName}" Width="*"/>
                        <DataGridTextColumn Header="Кол-во" Binding="{Binding Quantity}" Width="60"/>
                        <DataGridTextColumn Header="Статус" Binding="{Binding Status}" Width="80"/>
                        <DataGridTextColumn Header="План (ч)" Binding="{Binding PlannedDuration, StringFormat=F2}" Width="70"/>
                        <DataGridTextColumn Header="Факт (ч)" Binding="{Binding ActualDuration, StringFormat=F2}" Width="70"/>
                        <DataGridTextColumn Header="Эффект. %" Binding="{Binding Efficiency, StringFormat=F1}" Width="80"/>
                        <DataGridTextColumn Header="Отклон. (ч)" Binding="{Binding Deviation, StringFormat=F2}" Width="90"/>
                        <DataGridTextColumn Header="План. начало" Binding="{Binding PlannedStart}" Width="100"/>
                        <DataGridTextColumn Header="Факт. начало" Binding="{Binding ActualStart}" Width="100"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
            <TabItem Header="Станки">
                <DataGrid ItemsSource="{Binding MachineReports}" AutoGenerateColumns="False" IsReadOnly="True">
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Станок" Binding="{Binding MachineName}" Width="*"/>
                        <DataGridTextColumn Header="Тип" Binding="{Binding MachineType}" Width="120"/>
                        <DataGridTextColumn Header="Всего задач" Binding="{Binding TotalTasks}" Width="80"/>
                        <DataGridTextColumn Header="Завершено" Binding="{Binding CompletedTasks}" Width="80"/>
                        <DataGridTextColumn Header="План (ч)" Binding="{Binding PlannedHours, StringFormat=F2}" Width="70"/>
                        <DataGridTextColumn Header="Факт (ч)" Binding="{Binding ActualHours, StringFormat=F2}" Width="70"/>
                        <DataGridTextColumn Header="Переналадка (ч)" Binding="{Binding SetupTime, StringFormat=F2}" Width="110"/>
                        <DataGridTextColumn Header="Загрузка %" Binding="{Binding Utilization, StringFormat=F1}" Width="80"/>
                    </DataGrid.Columns>
                </DataGrid>
            </TabItem>
        </TabControl>
    </Grid>
</Window>